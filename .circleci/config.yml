version: 2.1

setup: true

orbs:
  continuation: circleci/continuation@1.0.0
  node: circleci/node@5.2.0

jobs:
  setup:
    docker: 
      - image: cimg/node:19.7.0
    resource_class: small
    steps:
      - checkout
      - node/install-packages:
          app-dir: .circleci/config_generator
      - run: node .circleci/config_generator/index.js
      - continuation/continue:
          configuration_path: generated_config.yml

workflows:
  setup-workflow:
    jobs:
      - setup
